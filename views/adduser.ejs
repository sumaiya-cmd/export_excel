<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <title>Document</title>
</head>

<body>
    <form method="post" action="/createuser"
        style="width: 50%; box-shadow: -5px 10px 20px rgb(228, 227, 227); 
    padding: 20px; border-radius: 10px; background-color: rgb(246, 249, 255); position: absolute; left: 50%; top: 50%; transform: translate(-50%,-50%);">

        <h1>User Details </h1>

        <div class="mt-4">
            <label class="form-label">name</label>
            <input name="name" type="text" class="form-control"  placeholder="name " id="uname"
                aria-describedby="emailHelp">
            <p class="text-danger" id="p0"></p>
        </div>

        <div class="mt-4">
            <label class="form-label">Email address</label>
            <input name="email" type="" class="form-control" placeholder="name@example.com" id="email"
                aria-describedby="emailHelp">
            <p class="text-danger" id="p1"></p>
        </div>

        <div class="mt-4">
            <label for="mobile" class="form-label">Mobile No</label>
            <input name="mobile" type="number" class="form-control" id="mobile">
            <p class="text-danger" id="p2"></p>
        </div>

        <button type="submit" class="btn btn-primary mt-4">Submit</button>

    </form>

    <script>


        var uname = document.querySelector('#uname');
        var mail = document.querySelector('#email');
        var mobile = document.querySelector('#mobile');

        

        function validateEmail(email) { //Validates the email address
            var emailRegex = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
            return emailRegex.test(email);
        }

        function validatePhone(phone) { //Validates the phone number
            var phoneRegex = /^(\+91-|\+91|0)?\d{10}$/; // Change this regex based on requirement
            return phoneRegex.test(phone);
        }


        document.querySelector('form').addEventListener('submit', function (dets) {
            
            maildisplay(mail.value.trim());
            mobiledisplay(mobile.value.trim());
            

            if(validateEmail(mail.value) === false || validatePhone(mobile.value) === false || mail.value.trim().length ===0 || mobile.value.trim().length === 0  ){
                
                dets.preventDefault();
            }
            

        })


        function maildisplay(value) {
            console.log(value);
            if (value.length === 0) {
                mail.style.border = '1px solid red';
                document.querySelector('#p1').innerHTML = ` input field cannot be blank`;
            }
            else if (!validateEmail(mail.value)) {
                mail.style.border = '1px solid red';
                document.querySelector('#p1').innerHTML = ` invalid email address`;
            }
            else{
                
            }
        }


        function mobiledisplay(value) {

            if (value.length === 0) {
                mobile.style.border = '1px solid red';
                document.querySelector('#p2').innerHTML = ` input field cannot be blank`;
            }
            else if (!validatePhone(mobile.value)) {
                mobile.style.border = '1px solid red';
                document.querySelector('#p2').innerHTML = ` invalid email address`;
            }
            else{

            }
        }



    </script>
</body>

</html>